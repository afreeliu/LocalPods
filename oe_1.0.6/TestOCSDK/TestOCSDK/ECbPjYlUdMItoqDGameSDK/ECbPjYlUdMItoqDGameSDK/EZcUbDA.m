

#import "EZcUbDA.h"
#import "EiwdWfvrnB.h"
#import "EDhZPuf.h"

#import "EuSIGAwOrj.h"
#import "EdutLyV.h"
#import "EYMhnmstjq.h"
#import "EmKtBeFuqi.h"
#import "EfKgqPeJzFs.h"
#import "EWNMJyHlLz.h"
#import "EDqxoOtgPanuMV.h"
#import "EUpQnPOJm.h"

#import "EHAVlYfRrOXvDpsJ.h"
#import "EafJNmpvxSCwHh.h"
#import "EqSwBQKHajgrn.h"
#import "EpSBOQT.h"

@interface EZcUbDA ()

@property (nonatomic, readwrite, strong) UIView *embSotwQATK;

@property (nonatomic, readwrite, strong) EdutLyV *epbLBykUwDiROJ;

@property (nonatomic, readwrite, strong) EdutLyV *eSzhJxadGMq;

@property (nonatomic, readwrite, strong) EuSIGAwOrj *ebSQeGw;

@property (nonatomic, readwrite, assign) CGFloat eeLhKcyI;

@property (nonatomic, readwrite, strong) EDhZPuf *eykUwiaYxHtWml;


@property (nonatomic, readwrite, strong) UIButton *ecrqaQvte;

/// 协议相关
@property (nonatomic, readwrite, strong) UIView *eATjqHGsiWoOlNy;
@property (nonatomic, readwrite, strong) UIButton *eKgcGlqxDPSwMU;
@property (nonatomic, readwrite, strong) UIButton *evtdZJhqU;
@property (nonatomic, readwrite, strong) CAShapeLayer *eixAksomCIlXnf;
@property (nonatomic, readwrite, strong) CAShapeLayer *eQhTAYVwMtqexW;


@end

@implementation EZcUbDA

#pragma mark ---------- public MethodNames
+(instancetype)nxAjFiuM {
    EZcUbDA *eDxevwbHadRANB = [[EZcUbDA alloc]init];
    eDxevwbHadRANB.translatesAutoresizingMaskIntoConstraints = NO;
    
    UIImage *lCbFMIQmru = nBSjbOCNdlsTEfq(@"lCbFMIQmru");
    eDxevwbHadRANB.layer.contents = (__bridge id)lCbFMIQmru.CGImage;
    
    return eDxevwbHadRANB;
}
- (void)nxiEODI {
    
    [_epbLBykUwDiROJ nhrHSVncXDl:@"" ngrlYtHiy:YES];
    [_eSzhJxadGMq nhrHSVncXDl:@"" ngrlYtHiy:YES];
    
}

#pragma mark --------------------------------------------------------------------------------

-(instancetype)init {
    self = [super init];
    if (self) {
        [self nwnEIDYWlsFNbhu];
    }
    return self;
}

- (void)layoutSubviews {
    [super layoutSubviews];
    [self nLYuaGKCs];
}


- (void)nwnEIDYWlsFNbhu {
    
    UIView *eVHunKhsfva = [[UIView alloc]init];
    eVHunKhsfva.translatesAutoresizingMaskIntoConstraints = NO;
    UIImage *EpDlOLawbJcFCdAr = nBSjbOCNdlsTEfq(@"EpDlOLawbJcFCdAr");
    eVHunKhsfva.layer.contents = (__bridge id)EpDlOLawbJcFCdAr.CGImage;
    _embSotwQATK = eVHunKhsfva;
    
    
    EdutLyV *eRFIGLiag = [EdutLyV nNgFDdAHMfTWbRko:emUvOITEkLaFd];
    eRFIGLiag.translatesAutoresizingMaskIntoConstraints = NO;
    _epbLBykUwDiROJ = eRFIGLiag;
    
    EdutLyV *eHBCXnu = [EdutLyV nNgFDdAHMfTWbRko:eewafLiENormalRegisterPassword];
    eHBCXnu.translatesAutoresizingMaskIntoConstraints = NO;
    _eSzhJxadGMq = eHBCXnu;
    
    EuSIGAwOrj *eYDcyFKEweRL = [[EuSIGAwOrj alloc]init];
    eYDcyFKEweRL.translatesAutoresizingMaskIntoConstraints = NO;
    UIImage *EcPaYghKZblk = nBSjbOCNdlsTEfq(@"EcPaYghKZblk");
    [eYDcyFKEweRL setBackgroundImage:EcPaYghKZblk forState:UIControlStateNormal];
    [eYDcyFKEweRL addTarget:self action:@selector(nrpVUWwOA:) forControlEvents:UIControlEventTouchUpInside];
    _ebSQeGw = eYDcyFKEweRL;
    
    
    _ecrqaQvte = [[UIButton alloc]init];
    _ecrqaQvte.translatesAutoresizingMaskIntoConstraints = NO;
    [_ecrqaQvte setTitle:@"使用手机注册更安全" forState:UIControlStateNormal];
    _ecrqaQvte.titleLabel.font = [UIFont systemFontOfSize:11];
    _ecrqaQvte.contentHorizontalAlignment = UIControlContentHorizontalAlignmentLeft;
    [_ecrqaQvte setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
    [_ecrqaQvte addTarget:self action:@selector(nUpicaYNWuLZoAction:) forControlEvents:UIControlEventTouchUpInside];
    
    [self addSubview:_embSotwQATK];
    [self addSubview:_epbLBykUwDiROJ];
    [self addSubview:_eSzhJxadGMq];
    [self addSubview:_ebSQeGw];
    
    [self nVkShYKmTel];
    [self addSubview:_ecrqaQvte];
    __weak typeof(self) weakSelf = self;
    [_epbLBykUwDiROJ nFtPJQbN:etXpuKkcjZHGSEboardReturnNext];
    [_eSzhJxadGMq nFtPJQbN:etXpuKkcjZHGSEboardReturnDefault];
    _epbLBykUwDiROJ.ngBTQjDUbCWrEFmt = ^{
        [weakSelf.eSzhJxadGMq nAmnLWC];
    };
}

#pragma mark ---------- 创建协议相关的内容
- (void)nVkShYKmTel {
    
    _eATjqHGsiWoOlNy = [[UIView alloc]init];
    _eATjqHGsiWoOlNy.translatesAutoresizingMaskIntoConstraints = NO;
    _eKgcGlqxDPSwMU = [[UIButton alloc]initWithFrame:CGRectMake(0, 0, 20, 20)];
    [_eKgcGlqxDPSwMU addTarget:self action:@selector(nTSPxwpNtbHCsfm:) forControlEvents:UIControlEventTouchUpInside];
    
    _eixAksomCIlXnf = nhCcuPAHRb(_eKgcGlqxDPSwMU, [UIColor whiteColor]);
    _eQhTAYVwMtqexW = nUNQXoZbwF(_eKgcGlqxDPSwMU, [UIColor whiteColor]);
    _eQhTAYVwMtqexW.hidden = YES;
    [_eATjqHGsiWoOlNy addSubview:_eKgcGlqxDPSwMU];
    
    _evtdZJhqU = [[UIButton alloc]initWithFrame:CGRectMake(CGRectGetMaxX(_eKgcGlqxDPSwMU.frame), 0, 100, 20)];
    [_evtdZJhqU setTitle:@"用户注册服务协议" forState:UIControlStateNormal];
    _evtdZJhqU.titleLabel.font = [UIFont systemFontOfSize:11];
    _evtdZJhqU.contentHorizontalAlignment = UIControlContentHorizontalAlignmentLeft;
    [_evtdZJhqU setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
    [_evtdZJhqU addTarget:self action:@selector(nDWBQJZFMcpH:) forControlEvents:UIControlEventTouchUpInside];
    
    [_eATjqHGsiWoOlNy addSubview:_evtdZJhqU];
    
    [self addSubview:_eATjqHGsiWoOlNy];
    
    if ([nuNlFyOARGcjiHL() isEqualToString:@"1"]) {
        _eATjqHGsiWoOlNy.hidden = NO;
    } else {
        _eATjqHGsiWoOlNy.hidden = YES;
    }
    
}

- (void)nTSPxwpNtbHCsfm:(UIButton *)sender {
    sender.selected = !sender.selected;
    if (sender.selected) {
        _eixAksomCIlXnf.hidden = YES;
        _eQhTAYVwMtqexW.hidden = NO;
    } else {
        _eixAksomCIlXnf.hidden = NO;
        _eQhTAYVwMtqexW.hidden = YES;
    }
}

- (void)nDWBQJZFMcpH:(UIButton *)sender {
    
    NSString *url = nnflUCNXh();
    NSString *protocolURL = nwltKndPUixZg(url);
    [EafJNmpvxSCwHh nDWBQJZFMcpHWithURL:protocolURL];
}

- (void)nUpicaYNWuLZoAction:(UIButton *)sender {
    if (self.nUpicaYNWuLZo) {
        self.nUpicaYNWuLZo();
    }
}

- (void)nLYuaGKCs {
    
    self.eeLhKcyI = nxoZcUBXRr();
    
    
    [EmKtBeFuqi nmlcLxvfi:_embSotwQATK naigAGwYRNfBte:_eeLhKcyI];
    [EmKtBeFuqi navgXGEYtfjL:_embSotwQATK naigAGwYRNfBte:0];
    [EmKtBeFuqi nwNALxocFyJupkm:_embSotwQATK naigAGwYRNfBte:nOdlHiR()];
    [EmKtBeFuqi ntIjPqxLTDs:_embSotwQATK naigAGwYRNfBte:nMaShjmCpeiZ()];
    
    _eeLhKcyI += nMaShjmCpeiZ();
    _eeLhKcyI += nxoZcUBXRr();
    
    [EmKtBeFuqi nmlcLxvfi:_epbLBykUwDiROJ naigAGwYRNfBte:_eeLhKcyI];
    [EmKtBeFuqi nLRCtGMFQZAYsc:_epbLBykUwDiROJ naigAGwYRNfBte:nlYQvETRDiu()];
    [EmKtBeFuqi nGTVpsCaIbgQwO:_epbLBykUwDiROJ naigAGwYRNfBte:nlYQvETRDiu()];
    [EmKtBeFuqi ntIjPqxLTDs:_epbLBykUwDiROJ naigAGwYRNfBte:nNHqwETFgyCduZ()];
    
    _eeLhKcyI += nNHqwETFgyCduZ();
    _eeLhKcyI += nxoZcUBXRr();
    
    [EmKtBeFuqi nmlcLxvfi:_eSzhJxadGMq naigAGwYRNfBte:_eeLhKcyI];
    [EmKtBeFuqi nLRCtGMFQZAYsc:_eSzhJxadGMq naigAGwYRNfBte:nlYQvETRDiu()];
    [EmKtBeFuqi nGTVpsCaIbgQwO:_eSzhJxadGMq naigAGwYRNfBte:nlYQvETRDiu()];
    [EmKtBeFuqi ntIjPqxLTDs:_eSzhJxadGMq naigAGwYRNfBte:nNHqwETFgyCduZ()];
    
    if (!_eATjqHGsiWoOlNy.hidden) {
        [EmKtBeFuqi nmlcLxvfi:_eATjqHGsiWoOlNy naigAGwYRNfBte:(_eeLhKcyI + nNHqwETFgyCduZ() + nxoZcUBXRr())];
        [EmKtBeFuqi nLYuaGKC1:_eATjqHGsiWoOlNy noGOglK:NSLayoutAttributeLeft nLYuaGKC2:_eSzhJxadGMq nZMdTVtLS:NSLayoutAttributeLeft naigAGwYRNfBte:0];
        [EmKtBeFuqi nwNALxocFyJupkm:_eATjqHGsiWoOlNy naigAGwYRNfBte:120];
        [EmKtBeFuqi ntIjPqxLTDs:_eATjqHGsiWoOlNy naigAGwYRNfBte:nSrFoTyLkVJ()];
        
        [EmKtBeFuqi nmlcLxvfi:_ecrqaQvte naigAGwYRNfBte:(_eeLhKcyI + nNHqwETFgyCduZ() + nQuUqIovRAg() + 20)];
        [EmKtBeFuqi nLYuaGKC1:_ecrqaQvte noGOglK:NSLayoutAttributeLeft nLYuaGKC2:_eSzhJxadGMq nZMdTVtLS:NSLayoutAttributeLeft naigAGwYRNfBte:0];
        
        [EmKtBeFuqi nwNALxocFyJupkm:_ecrqaQvte naigAGwYRNfBte:120];
        [EmKtBeFuqi ntIjPqxLTDs:_ecrqaQvte naigAGwYRNfBte:nSrFoTyLkVJ()];
    } else {
        [EmKtBeFuqi nmlcLxvfi:_ecrqaQvte naigAGwYRNfBte:(_eeLhKcyI + nNHqwETFgyCduZ() + nxoZcUBXRr())];
        [EmKtBeFuqi nLYuaGKC1:_ecrqaQvte noGOglK:NSLayoutAttributeLeft nLYuaGKC2:_eSzhJxadGMq nZMdTVtLS:NSLayoutAttributeLeft naigAGwYRNfBte:0];
        [EmKtBeFuqi nwNALxocFyJupkm:_ecrqaQvte naigAGwYRNfBte:120];
        [EmKtBeFuqi ntIjPqxLTDs:_ecrqaQvte naigAGwYRNfBte:nSrFoTyLkVJ()];
    }
    
    _eeLhKcyI += nNHqwETFgyCduZ();
    _eeLhKcyI += (nQuUqIovRAg() * 5);
    
    [EmKtBeFuqi nmlcLxvfi:_ebSQeGw naigAGwYRNfBte:_eeLhKcyI];
    [EmKtBeFuqi nLRCtGMFQZAYsc:_ebSQeGw naigAGwYRNfBte:nlYQvETRDiu()];
    [EmKtBeFuqi nGTVpsCaIbgQwO:_ebSQeGw naigAGwYRNfBte:nlYQvETRDiu()];
    [EmKtBeFuqi ntIjPqxLTDs:_ebSQeGw naigAGwYRNfBte:nASyHwmJvCnsVg()];
    
    _eeLhKcyI += nNHqwETFgyCduZ();
    [self nmWvLHBT];
}

#pragma mark ---------- 计算输入框的位置
- (void)nmWvLHBT {
    if (CGRectGetHeight(self.epbLBykUwDiROJ.bounds)) {
        [self nMkRofqpl:self.epbLBykUwDiROJ];
    }
    if (CGRectGetHeight(self.eSzhJxadGMq.bounds)) {
        [self nMkRofqpl:self.eSzhJxadGMq];
    }
}
- (void)nMkRofqpl:(EdutLyV *)evsYTmPyDceUSja {
    UIWindow *window = nLyAxbKV();
    CGRect rect = [evsYTmPyDceUSja convertRect:evsYTmPyDceUSja.bounds toView:window];
    CGFloat eGPjQyWU = CGRectGetMaxY(rect);
    [evsYTmPyDceUSja nMkRofqpl:eGPjQyWU];
}

#pragma mark ---------- back Action
-(void)nscSoAxzknMbAction:(UIButton *)sender {
    if (self.nscSoAxzknMbAction) {
        [self nxiEODI];
        self.hidden = YES;
        self.nscSoAxzknMbAction();
    }
}

#pragma mark ---------- button Action
- (void)nrpVUWwOA:(UIButton *)sender {
    NSString *account = _epbLBykUwDiROJ.emsWldJuPwEnih;
    NSString *password = _eSzhJxadGMq.emsWldJuPwEnih;
    
    if (_eQhTAYVwMtqexW.hidden && !_eATjqHGsiWoOlNy.hidden) {
        [EGuXiaQqj nHgTIahEeoP:@"请先阅读相关协议并勾选同意"];
        return;
    }
    
    if (!account || !account.length) {
        [EGuXiaQqj nHgTIahEeoP:@"请输入账号"];
        return;
    }
    if (!password || !password.length) {
        [EGuXiaQqj nHgTIahEeoP:@"请输入密码"];
        return;
    }
    if (!nfYKyouOGWr(password) || !nfYKyouOGWr(password)) {
        [EGuXiaQqj nHgTIahEeoP:@"密码格式有误"];
        return;
    }
    NSDictionary *para = @{
                           @"user_name": account,
                           @"password": password,
                           @"adv_id": nUQWvyCwLFpTlkE(),
                           @"channel_id": nevRknysWHp(),
                           @"material_id": @"0",
                           @"gid": nqGpZjB(),
                           @"sub_gid": nRKtkwFIQTcuafb(),
                           @"platform_id": nJTbwZrLuDNGc(),
                           @"device_code": nPBoTSdgeJGH()
                           };
    __weak typeof(self) weakSelf = self;
    [EGuXiaQqj nJVrDAcpuRWTMdbLIndicatorWithTitlte:@"正在注册..."];
    [self.eykUwiaYxHtWml nEaYmCfWwKqMTo:nJtTnSBUxWjZC() parameters:para];
    self.eykUwiaYxHtWml.nroGdOFnthEjA = ^(EDhZPuf *object) {
        dispatch_async(dispatch_get_main_queue(), ^{
            [EGuXiaQqj nPjHvlQfar];
            if (object.erRfJDXKwhBGTxHn == 200) {
                if (object.eEJRiLHAkpwhY) {
//                    [EGuXiaQqj nJVrDAcpuRWTMdbLSuccessMessage:object.eAmjYwM];
                    [weakSelf nygwohYGEOlR:object];
                }
            } else {
                if (object.eAmjYwM) {
                    [EGuXiaQqj nHgTIahEeoP:object.eAmjYwM];
                }
            }
        });
    };
    self.eykUwiaYxHtWml.nNhPrOJC = ^(NSError *error) {
        dispatch_async(dispatch_get_main_queue(), ^{
            [EGuXiaQqj nPjHvlQfar];
            [EGuXiaQqj nHgTIahEeoP:@"网络出了小差!!!"];
        });
    };
    
}

/// 注册成功返回执行的方法
- (void)nygwohYGEOlR:(EDhZPuf *)memberRegisterModel {
    /// 保存账户
    nCRNGDXh(_epbLBykUwDiROJ.emsWldJuPwEnih);
    /// 保存最后登录的账户
    nwJYlcmnI(_epbLBykUwDiROJ.emsWldJuPwEnih);
    /// 保存账户密码
    ntqEHUVm(_eSzhJxadGMq.emsWldJuPwEnih, _epbLBykUwDiROJ.emsWldJuPwEnih);
    /// 保存用户id
    nCsAeiWGBT(memberRegisterModel.eHIRquhplOQgw);
    /// 保存用户名称
    nytViXr(memberRegisterModel.eEJRiLHAkpwhY);
    nvRJcAbKHVqarx(memberRegisterModel.eGUWxuLgnjhAm);
    NSDictionary *userInfo = @{
                               @"uid": memberRegisterModel.eHIRquhplOQgw,
                               @"username": memberRegisterModel.eEJRiLHAkpwhY
                               };
    nQPXLfIKevpyzFVH(eJtEMRDAmI, nil, userInfo);
    
    BOOL ejvXtmIYEyHqVDKg = NO;
    BOOL eaAyifGRep = NO;
    if ([memberRegisterModel.eBVFRgHlmJe isEqualToString:@"1"]) {
        /// 没有绑定手机
        ejvXtmIYEyHqVDKg = YES;
    }
    if ([memberRegisterModel.eGUWxuLgnjhAm isEqualToString:@"1"]) {
        /// 没有绑定身份证
        eaAyifGRep = YES;
    }
    if (_nygwohYGEOlR) {
        self.hidden = YES;
        [self removeFromSuperview];
        _nygwohYGEOlR(ejvXtmIYEyHqVDKg, eaAyifGRep);
    }
}






-(EDhZPuf *)eykUwiaYxHtWml {
    if (!_eykUwiaYxHtWml) {
        _eykUwiaYxHtWml = [[EDhZPuf alloc]init];
    }
    return _eykUwiaYxHtWml;
}


@end
