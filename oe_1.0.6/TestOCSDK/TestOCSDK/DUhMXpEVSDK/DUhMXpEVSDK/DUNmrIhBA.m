

#import "DUNmrIhBA.h"
#import "DUrIzqAQF.h"
#import "DUEIFHkfXudqYLRe.h"

#import "DUGyrfoQ.h"
#import "DUHWleqOoxv.h"
#import "DULCiQqMJAk.h"
#import "DUjHPamSNKWkfM.h"
#import "DUGcbRnKpJlPkyoY.h"
#import "DUPnFUxRSujZJwh.h"
#import "DUIBriUTudq.h"
#import "DUmZjChQNHcbXvD.h"

#import "DUAIBbSfFKZsPODw.h"
#import "DUKxuUIr.h"
#import "DUuTyFUQsovhq.h"
#import "DUmDPUYiM.h"

@interface DUNmrIhBA ()

@property (nonatomic, readwrite, strong) UILabel *eVZsbUve;

@property (nonatomic, readwrite, strong) DUHWleqOoxv *ezuKvVmpOUIQjeD;

@property (nonatomic, readwrite, strong) DUHWleqOoxv *eubaPDwrHysfdj;

@property (nonatomic, readwrite, strong) DUGyrfoQ *eeAKvgjizHJw;

@property (nonatomic, readwrite, assign) CGFloat eMQuBOarE;

@property (nonatomic, readwrite, strong) DUEIFHkfXudqYLRe *ehvbKZTgYIXW;


@property (nonatomic, readwrite, strong) UIButton *ekHEaXodP;

/// 协议相关
@property (nonatomic, readwrite, strong) UIView *eHFLdIVView;
@property (nonatomic, readwrite, strong) UIButton *euJKLyWnAbHmetD;
@property (nonatomic, readwrite, strong) UIButton *eGzxLfHI;
@property (nonatomic, readwrite, strong) CAShapeLayer *eXgMcAIK;
@property (nonatomic, readwrite, strong) CAShapeLayer *eIXbZrDQvyqHcufj;


@end

@implementation DUNmrIhBA

#pragma mark ---------- public MethodNames
+(instancetype)kxstzCpSHOYwW {
    DUNmrIhBA *eKdNWyk = [[DUNmrIhBA alloc]init];
    eKdNWyk.translatesAutoresizingMaskIntoConstraints = NO;
    return eKdNWyk;
}
- (void)kDlfUmNpWuRzrgq {
    
    [_ezuKvVmpOUIQjeD kFiftlVHNBPaQX:@"" kHnyqoAY:YES];
    [_eubaPDwrHysfdj kFiftlVHNBPaQX:@"" kHnyqoAY:YES];
    
}

#pragma mark --------------------------------------------------------------------------------

-(instancetype)init {
    self = [super init];
    if (self) {
        [self kORslhEpXSCDntq];
    }
    return self;
}

- (void)layoutSubviews {
    [super layoutSubviews];
    [self kFhumUEfn];
}


- (void)kORslhEpXSCDntq {
    
    UILabel *ebxtjEZGJszumSwl = [[UILabel alloc]init];
    ebxtjEZGJszumSwl.translatesAutoresizingMaskIntoConstraints = NO;
    ebxtjEZGJszumSwl.text = khdurizNfUyB();
    ebxtjEZGJszumSwl.textColor = [DULCiQqMJAk kzqvYPK:kCwNfzgtTG()];
    ebxtjEZGJszumSwl.textAlignment = NSTextAlignmentCenter;
    ebxtjEZGJszumSwl.font = [UIFont systemFontOfSize:17];
    _eVZsbUve = ebxtjEZGJszumSwl;
    
    DUHWleqOoxv *eHgxRoMwLXsuS = [DUHWleqOoxv kibrqNgCV:eVEyjiwDNTypeNormalRegisterAccount];
    eHgxRoMwLXsuS.translatesAutoresizingMaskIntoConstraints = NO;
    _ezuKvVmpOUIQjeD = eHgxRoMwLXsuS;
    
    DUHWleqOoxv *efCebXl = [DUHWleqOoxv kibrqNgCV:eXDEiFVkgzWhP];
    efCebXl.translatesAutoresizingMaskIntoConstraints = NO;
    _eubaPDwrHysfdj = efCebXl;
    
    DUGyrfoQ *ePmYgBI = [[DUGyrfoQ alloc]init];
    ePmYgBI.translatesAutoresizingMaskIntoConstraints = NO;
    kuSalcM(ePmYgBI, [DULCiQqMJAk kzqvYPK:kCwNfzgtTG()]);
    [ePmYgBI addTarget:self action:@selector(kYNuzsjLKwofUP:) forControlEvents:UIControlEventTouchUpInside];
    _eeAKvgjizHJw = ePmYgBI;
    
    
    _ekHEaXodP = [[UIButton alloc]init];
    _ekHEaXodP.translatesAutoresizingMaskIntoConstraints = NO;
    [_ekHEaXodP setTitle:@"使用手机注册更安全" forState:UIControlStateNormal];
    _ekHEaXodP.titleLabel.font = [UIFont systemFontOfSize:12];
    _ekHEaXodP.contentHorizontalAlignment = UIControlContentHorizontalAlignmentLeft;
    [_ekHEaXodP setTitleColor:[DULCiQqMJAk kzqvYPK:kCwNfzgtTG()] forState:UIControlStateNormal];
    [_ekHEaXodP addTarget:self action:@selector(kEwsGURopOABPWD:) forControlEvents:UIControlEventTouchUpInside];
    
    [self addSubview:_eVZsbUve];
    [self addSubview:_ezuKvVmpOUIQjeD];
    [self addSubview:_eubaPDwrHysfdj];
    [self addSubview:_eeAKvgjizHJw];
    
    [self kCaGkLyXEnojMRSh];
    [self addSubview:_ekHEaXodP];
    __weak typeof(self) weakSelf = self;
    [_ezuKvVmpOUIQjeD khNyZHtvxA:ekMeNQzvjgtJhSnA];
    [_eubaPDwrHysfdj khNyZHtvxA:etVQXNiY];
    _ezuKvVmpOUIQjeD.kjJCATGYMWmDpeI = ^{
        [weakSelf.eubaPDwrHysfdj kQbayuBH];
    };
}

#pragma mark ---------- 创建协议相关的内容
- (void)kCaGkLyXEnojMRSh {
    
    _eHFLdIVView = [[UIView alloc]init];
    _eHFLdIVView.translatesAutoresizingMaskIntoConstraints = NO;
    _euJKLyWnAbHmetD = [[UIButton alloc]initWithFrame:CGRectMake(0, 0, 20, 20)];
    [_euJKLyWnAbHmetD addTarget:self action:@selector(kuFklaWPhVSoE:) forControlEvents:UIControlEventTouchUpInside];
    
    _eXgMcAIK = kSVFtmpfiBUKWGl(_euJKLyWnAbHmetD, [DULCiQqMJAk kzqvYPK:kCwNfzgtTG()]);
    _eIXbZrDQvyqHcufj = kZCzYHO(_euJKLyWnAbHmetD, [DULCiQqMJAk kzqvYPK:kCwNfzgtTG()]);
    _eIXbZrDQvyqHcufj.hidden = YES;
    [_eHFLdIVView addSubview:_euJKLyWnAbHmetD];
    
    _eGzxLfHI = [[UIButton alloc]initWithFrame:CGRectMake(CGRectGetMaxX(_euJKLyWnAbHmetD.frame), 0, 100, 20)];
    [_eGzxLfHI setTitle:@"用户注册服务协议" forState:UIControlStateNormal];
    _eGzxLfHI.titleLabel.font = [UIFont systemFontOfSize:12];
    _eGzxLfHI.contentHorizontalAlignment = UIControlContentHorizontalAlignmentLeft;
    [_eGzxLfHI setTitleColor:[DULCiQqMJAk kzqvYPK:kCwNfzgtTG()] forState:UIControlStateNormal];
    [_eGzxLfHI addTarget:self action:@selector(koskHQJnAiBFP:) forControlEvents:UIControlEventTouchUpInside];
    
    [_eHFLdIVView addSubview:_eGzxLfHI];
    
    [self addSubview:_eHFLdIVView];
    
    if ([kIrvOHcu() isEqualToString:@"1"]) {
        _eHFLdIVView.hidden = NO;
    } else {
        _eHFLdIVView.hidden = YES;
    }
    
}

- (void)kuFklaWPhVSoE:(UIButton *)sender {
    sender.selected = !sender.selected;
    if (sender.selected) {
        _eXgMcAIK.hidden = YES;
        _eIXbZrDQvyqHcufj.hidden = NO;
    } else {
        _eXgMcAIK.hidden = NO;
        _eIXbZrDQvyqHcufj.hidden = YES;
    }
}

- (void)koskHQJnAiBFP:(UIButton *)sender {
    
    NSString *url = kMTBQakZDx();
    NSString *protocolURL = kCKMHdimr(url);
    [DUKxuUIr koskHQJnAiBFPWithURL:protocolURL];
}

- (void)kEwsGURopOABPWD:(UIButton *)sender {
    if (self.kaMPnrYCW) {
        self.kaMPnrYCW();
    }
}

- (void)kFhumUEfn {
    
    _eMQuBOarE = ktaMSrs();
    
    [DUjHPamSNKWkfM khXiHKlJYIcsWTb:_eVZsbUve kjwoMfYHX:_eMQuBOarE];
    [DUjHPamSNKWkfM kcNCfuJpSgtid:_eVZsbUve kjwoMfYHX:kPofSGniBdetAa()];
    [DUjHPamSNKWkfM kdMvtuRCVqTon:_eVZsbUve kjwoMfYHX:kPofSGniBdetAa()];
    [DUjHPamSNKWkfM kgrLjqVbGpvdykZl:_eVZsbUve kjwoMfYHX:kDoRYcqQOnd()];
    
    _eMQuBOarE += kDoRYcqQOnd();
    _eMQuBOarE += ktaMSrs();
    
    [DUjHPamSNKWkfM khXiHKlJYIcsWTb:_ezuKvVmpOUIQjeD kjwoMfYHX:_eMQuBOarE];
    [DUjHPamSNKWkfM ktGjyplNWv:_ezuKvVmpOUIQjeD kjwoMfYHX:0];
    [DUjHPamSNKWkfM kYzDgmEuJZa:_ezuKvVmpOUIQjeD kjwoMfYHX:kExuNVS()];
    [DUjHPamSNKWkfM kgrLjqVbGpvdykZl:_ezuKvVmpOUIQjeD kjwoMfYHX:kDoRYcqQOnd()];
    
    _eMQuBOarE += kDoRYcqQOnd();
    _eMQuBOarE += ktaMSrs();
    
    [DUjHPamSNKWkfM khXiHKlJYIcsWTb:_eubaPDwrHysfdj kjwoMfYHX:_eMQuBOarE];
    [DUjHPamSNKWkfM ktGjyplNWv:_eubaPDwrHysfdj kjwoMfYHX:0];
    [DUjHPamSNKWkfM kYzDgmEuJZa:_eubaPDwrHysfdj kjwoMfYHX:kExuNVS()];
    [DUjHPamSNKWkfM kgrLjqVbGpvdykZl:_eubaPDwrHysfdj kjwoMfYHX:kDoRYcqQOnd()];
    
    if (!_eHFLdIVView.hidden) {
        [DUjHPamSNKWkfM khXiHKlJYIcsWTb:_eHFLdIVView kjwoMfYHX:(_eMQuBOarE + kDoRYcqQOnd() + kPofSGniBdetAa())];
        [DUjHPamSNKWkfM kcNCfuJpSgtid:_eHFLdIVView kjwoMfYHX:khSRvCsVT()];
        [DUjHPamSNKWkfM kYzDgmEuJZa:_eHFLdIVView kjwoMfYHX:120];
        [DUjHPamSNKWkfM kgrLjqVbGpvdykZl:_eHFLdIVView kjwoMfYHX:kzrKvQemERlgdP()];
        
        [DUjHPamSNKWkfM khXiHKlJYIcsWTb:_ekHEaXodP kjwoMfYHX:(_eMQuBOarE + kDoRYcqQOnd() + ktaMSrs() + 20)];
        [DUjHPamSNKWkfM kcNCfuJpSgtid:_ekHEaXodP kjwoMfYHX:khSRvCsVT()];
        [DUjHPamSNKWkfM kYzDgmEuJZa:_ekHEaXodP kjwoMfYHX:120];
        [DUjHPamSNKWkfM kgrLjqVbGpvdykZl:_ekHEaXodP kjwoMfYHX:kzrKvQemERlgdP()];
    } else {
        [DUjHPamSNKWkfM khXiHKlJYIcsWTb:_ekHEaXodP kjwoMfYHX:(_eMQuBOarE + kDoRYcqQOnd() + kPofSGniBdetAa())];
        [DUjHPamSNKWkfM kcNCfuJpSgtid:_ekHEaXodP kjwoMfYHX:khSRvCsVT()];
        [DUjHPamSNKWkfM kYzDgmEuJZa:_ekHEaXodP kjwoMfYHX:120];
        [DUjHPamSNKWkfM kgrLjqVbGpvdykZl:_ekHEaXodP kjwoMfYHX:kzrKvQemERlgdP()];
    }
    
    
    
    _eMQuBOarE += kDoRYcqQOnd();
    _eMQuBOarE += (khSRvCsVT() * 4);
    
    [DUjHPamSNKWkfM khXiHKlJYIcsWTb:_eeAKvgjizHJw kjwoMfYHX:_eMQuBOarE];
    [DUjHPamSNKWkfM ktGjyplNWv:_eeAKvgjizHJw kjwoMfYHX:0];
    [DUjHPamSNKWkfM kYzDgmEuJZa:_eeAKvgjizHJw kjwoMfYHX:kcNsoFWewpBQT()];
    [DUjHPamSNKWkfM kgrLjqVbGpvdykZl:_eeAKvgjizHJw kjwoMfYHX:kiHIVjCQRJ()];
    
    _eMQuBOarE += kDoRYcqQOnd();
    
    [self kTLrBoKzIJa];
}
#pragma mark ---------- 计算输入框的位置
- (void)kTLrBoKzIJa {
    if (CGRectGetHeight(self.ezuKvVmpOUIQjeD.bounds)) {
        [self kJHuExWpsqVKfl:self.ezuKvVmpOUIQjeD];
    }
    if (CGRectGetHeight(self.eubaPDwrHysfdj.bounds)) {
        [self kJHuExWpsqVKfl:self.eubaPDwrHysfdj];
    }
}
- (void)kJHuExWpsqVKfl:(DUHWleqOoxv *)elpZwvNR {
    UIWindow *window = kOjcdzAgI();
    CGRect rect = [elpZwvNR convertRect:elpZwvNR.bounds toView:window];
    CGFloat eIpxfwWAXvzMaxY = CGRectGetMaxY(rect);
    [elpZwvNR kJHuExWpsqVKfl:eIpxfwWAXvzMaxY];
}
#pragma mark ---------- button Action
- (void)kYNuzsjLKwofUP:(UIButton *)sender {
    NSString *account = _ezuKvVmpOUIQjeD.eegFcbrRpD;
    NSString *password = _eubaPDwrHysfdj.eegFcbrRpD;
    
    if (_eIXbZrDQvyqHcufj.hidden && !_eHFLdIVView.hidden) {
        [DUyUrAEagzMZ kdSzeClsBhOtZIYxErrorMessage:@"请先阅读相关协议并勾选同意"];
        return;
    }
    
    if (!account || !account.length) {
        [DUyUrAEagzMZ kdSzeClsBhOtZIYxErrorMessage:@"请输入账号"];
        return;
    }
    if (!password || !password.length) {
        [DUyUrAEagzMZ kdSzeClsBhOtZIYxErrorMessage:@"请输入密码"];
        return;
    }
    if (!kzJomuDbFgVxtUfX(password) || !kzJomuDbFgVxtUfX(password)) {
        [DUyUrAEagzMZ kdSzeClsBhOtZIYxErrorMessage:@"密码格式有误"];
        return;
    }
    NSDictionary *para = @{
                           @"user_name": account,
                           @"password": password,
                           @"adv_id": kXsJmMxSNAyp(),
                           @"channel_id": kGxWjgvIUlbJhFoO(),
                           @"material_id": @"0",
                           @"gid": kEJsVuODloh(),
                           @"sub_gid": kOVNImM(),
                           @"platform_id": kKQumhviO(),
                           @"device_code": kGvYpKkCRTLiA()
                           };
    __weak typeof(self) weakSelf = self;
    [DUyUrAEagzMZ kdSzeClsBhOtZIYxIndicatorWithTitlte:@"正在注册..."];
    [self.ehvbKZTgYIXW kXLPOEpCBozkZM:kBICKPMdHjX() parameters:para];
    self.ehvbKZTgYIXW.kurcxnG = ^(DUEIFHkfXudqYLRe *object) {
        dispatch_async(dispatch_get_main_queue(), ^{
            [DUyUrAEagzMZ kmBSjbQ];
            if (object.ebTBquLMZ == 200) {
                if (object.eHKOtDbFEsVUQThW) {
//                    [DUyUrAEagzMZ kqSsTXv:object.euwmDFU];
                    [weakSelf kjdlcEiANeMrpKk:object];
                }
            } else {
                if (object.euwmDFU) {
                    [DUyUrAEagzMZ kdSzeClsBhOtZIYxErrorMessage:object.euwmDFU];
                }
            }
        });
    };
    self.ehvbKZTgYIXW.kkMohviBYIVtrnEm = ^(NSError *error) {
        dispatch_async(dispatch_get_main_queue(), ^{
            [DUyUrAEagzMZ kmBSjbQ];
            [DUyUrAEagzMZ kdSzeClsBhOtZIYxErrorMessage:@"网络出了小差!!!"];
        });
    };
    
}

/// 注册成功返回执行的方法
- (void)kjdlcEiANeMrpKk:(DUEIFHkfXudqYLRe *)memberRegisterModel {
    /// 保存账户
    kgLROBiPX(_ezuKvVmpOUIQjeD.eegFcbrRpD);
    /// 保存最后登陆的账户
    ktkehrHfaJV(_ezuKvVmpOUIQjeD.eegFcbrRpD);
    /// 保存账户密码
    krIVPZxslkvLmD(_eubaPDwrHysfdj.eegFcbrRpD, _ezuKvVmpOUIQjeD.eegFcbrRpD);
    /// 保存用户id
    kqsEGtorOQ(memberRegisterModel.eGzNRZFM);
    /// 保存用户名称
    kZjvHqnW(memberRegisterModel.eHKOtDbFEsVUQThW);
    kLZcFgxmYytaunN(memberRegisterModel.eWmXbyHJhiYDB);
    NSDictionary *userInfo = @{
                               @"uid": memberRegisterModel.eGzNRZFM,
                               @"username": memberRegisterModel.eHKOtDbFEsVUQThW
                               };
    kXQPAZNUwrm(eMapQoRwN, nil, userInfo);
    
    BOOL eWzAOZt = NO;
    BOOL eqUnENAlvyJLoQp = NO;
    if ([memberRegisterModel.eSILRhOzGbpCrli isEqualToString:@"1"]) {
        /// 没有绑定手机
        eWzAOZt = YES;
    }
    if ([memberRegisterModel.eWmXbyHJhiYDB isEqualToString:@"1"]) {
        /// 没有绑定身份证
        eqUnENAlvyJLoQp = YES;
    }
    if (_kjdlcEiANeMrpKk) {
        self.hidden = YES;
        [self removeFromSuperview];
        _kjdlcEiANeMrpKk(eWzAOZt, eqUnENAlvyJLoQp);
    }
}






-(DUEIFHkfXudqYLRe *)ehvbKZTgYIXW {
    if (!_ehvbKZTgYIXW) {
        _ehvbKZTgYIXW = [[DUEIFHkfXudqYLRe alloc]init];
    }
    return _ehvbKZTgYIXW;
}


@end
