

#import "DUEWTKiRjzYcCl.h"
#import "DUzUhgRKSDH.h"

#import "DUGyrfoQ.h"
#import "DUHWleqOoxv.h"
#import "DULCiQqMJAk.h"
#import "DUjHPamSNKWkfM.h"
#import "DUGcbRnKpJlPkyoY.h"
#import "DUPnFUxRSujZJwh.h"
#import "DUmZjChQNHcbXvD.h"
#import "DUIBriUTudq.h"

#import "DUAIBbSfFKZsPODw.h"
#import "DUKxuUIr.h"
#import "DUuTyFUQsovhq.h"
#import "DUmDPUYiM.h"
#import "DUrIzqAQF.h"
#import "DUprVCRzBgiI.h"
@interface DUEWTKiRjzYcCl ()

@property (nonatomic, readwrite, strong) UILabel *eVZsbUve;

@property (nonatomic, readwrite, strong) UIButton *eKTYJzc;

@property (nonatomic, readwrite, strong) DUHWleqOoxv *ezuKvVmpOUIQjeD;

@property (nonatomic, readwrite, strong) DUHWleqOoxv *eubaPDwrHysfdj;

@property (nonatomic, readwrite, strong) DUHWleqOoxv *eGZYOtlsNhargDe;

@property (nonatomic, readwrite, strong) DUGyrfoQ *eeAKvgjizHJw;

@property (nonatomic, readwrite, assign) CGFloat eMQuBOarE;

@property (nonatomic, readwrite, strong) DUzUhgRKSDH *ekSifuGysdvlm;

/// 协议相关
@property (nonatomic, readwrite, strong) UIView *eHFLdIVView;
@property (nonatomic, readwrite, strong) UIButton *euJKLyWnAbHmetD;
@property (nonatomic, readwrite, strong) UIButton *eGzxLfHI;

@property (nonatomic, readwrite, strong) CAShapeLayer *eXgMcAIK;
@property (nonatomic, readwrite, strong) CAShapeLayer *eIXbZrDQvyqHcufj;

@end

@implementation DUEWTKiRjzYcCl
#pragma mark ---------- public MethodNames
+(instancetype)kpnbDxtaflQk {
    DUEWTKiRjzYcCl *eMLIbOjquSx = [[DUEWTKiRjzYcCl alloc]init];
    eMLIbOjquSx.translatesAutoresizingMaskIntoConstraints = NO;
    return eMLIbOjquSx;
}

- (void)kDlfUmNpWuRzrgq {
    
    [_ezuKvVmpOUIQjeD kFiftlVHNBPaQX:@"" kHnyqoAY:YES];
    [_eubaPDwrHysfdj kFiftlVHNBPaQX:@"" kHnyqoAY:YES];
    [_eGZYOtlsNhargDe kFiftlVHNBPaQX:@"" kHnyqoAY:YES];
    
}


#pragma mark --------------------------------------------------------------------------------

-(instancetype)init {
    self = [super init];
    if (self) {
        [self kORslhEpXSCDntq];
    }
    return self;;
}

- (void)layoutSubviews {
    [super layoutSubviews];
    [self kFhumUEfn];
}


- (void)kORslhEpXSCDntq {
    
    UILabel *ebxtjEZGJszumSwl = [[UILabel alloc]init];
    ebxtjEZGJszumSwl.translatesAutoresizingMaskIntoConstraints = NO;
    ebxtjEZGJszumSwl.text = kwgTPNdIxLWq();
    ebxtjEZGJszumSwl.textColor = [DULCiQqMJAk kzqvYPK:kCwNfzgtTG()];
    ebxtjEZGJszumSwl.textAlignment = NSTextAlignmentCenter;
    ebxtjEZGJszumSwl.font = [UIFont systemFontOfSize:17];
    _eVZsbUve = ebxtjEZGJszumSwl;
    
    UIButton *eKTYJzc = [[UIButton alloc]init];
    eKTYJzc.translatesAutoresizingMaskIntoConstraints = NO;
    kFmfKVYBsqOuoxQD(eKTYJzc, [DULCiQqMJAk kzqvYPK:kCwNfzgtTG()]);
    [eKTYJzc addTarget:self action:@selector(kvABkErUSyhAction:) forControlEvents:UIControlEventTouchUpInside];
    _eKTYJzc = eKTYJzc;
    
    DUHWleqOoxv *eHgxRoMwLXsuS = [DUHWleqOoxv kibrqNgCV:eWRZvkDJhYQmlfzn];
    eHgxRoMwLXsuS.translatesAutoresizingMaskIntoConstraints = NO;
    _ezuKvVmpOUIQjeD = eHgxRoMwLXsuS;
    
    DUHWleqOoxv *efCebXl = [DUHWleqOoxv kibrqNgCV:eVEyjiwDNTypePhoneRegisterCode];
    efCebXl.translatesAutoresizingMaskIntoConstraints = NO;
    __weak typeof(self) weakSelf = self;
    efCebXl.ktrzxpvMY = ^NSDictionary *(BOOL enable) {
        if (!enable) {
            NSString *phone = @"";
            if (weakSelf.ezuKvVmpOUIQjeD.eegFcbrRpD.length) {
                phone = weakSelf.ezuKvVmpOUIQjeD.eegFcbrRpD;
            }
            NSDictionary *para = @{
                                   @"phone": phone,
                                   @"type": @(0)
                                   };
            return para;
        }
        return nil;
    };
    _eubaPDwrHysfdj = efCebXl;
    
    DUHWleqOoxv *emcOqoSJiX = [DUHWleqOoxv kibrqNgCV:eVEyjiwDNTypePhoneRegisterPassword];
    emcOqoSJiX.translatesAutoresizingMaskIntoConstraints = NO;
    _eGZYOtlsNhargDe = emcOqoSJiX;
    
    DUGyrfoQ *ePmYgBI = [[DUGyrfoQ alloc]init];
    ePmYgBI.translatesAutoresizingMaskIntoConstraints = NO;
    kuSalcM(ePmYgBI, [DULCiQqMJAk kzqvYPK:kCwNfzgtTG()]);
    [ePmYgBI addTarget:self action:@selector(kYNuzsjLKwofUP:) forControlEvents:UIControlEventTouchUpInside];
    _eeAKvgjizHJw = ePmYgBI;
    
    [self addSubview:_eVZsbUve];
    [self addSubview:_eKTYJzc];
    [self addSubview:_ezuKvVmpOUIQjeD];
    [self addSubview:_eubaPDwrHysfdj];
    [self addSubview:_eGZYOtlsNhargDe];
    [self addSubview:_eeAKvgjizHJw];
    
    [self kCaGkLyXEnojMRSh];
    
    [_ezuKvVmpOUIQjeD khNyZHtvxA:ekMeNQzvjgtJhSnA];
    [_eubaPDwrHysfdj khNyZHtvxA:ekMeNQzvjgtJhSnA];
    [_eGZYOtlsNhargDe khNyZHtvxA:etVQXNiY];
    _ezuKvVmpOUIQjeD.kjJCATGYMWmDpeI = ^{
        [weakSelf.eubaPDwrHysfdj kQbayuBH];
    };
    _eubaPDwrHysfdj.kjJCATGYMWmDpeI = ^{
        [weakSelf.eGZYOtlsNhargDe kQbayuBH];
    };
}

#pragma mark ---------- 创建协议相关的内容
- (void)kCaGkLyXEnojMRSh {
    
    _eHFLdIVView = [[UIView alloc]init];
    _eHFLdIVView.translatesAutoresizingMaskIntoConstraints = NO;
    _euJKLyWnAbHmetD = [[UIButton alloc]initWithFrame:CGRectMake(0, 0, 20, 20)];
    [_euJKLyWnAbHmetD addTarget:self action:@selector(kuFklaWPhVSoE:) forControlEvents:UIControlEventTouchUpInside];
    
    _eXgMcAIK = kSVFtmpfiBUKWGl(_euJKLyWnAbHmetD, [DULCiQqMJAk kzqvYPK:kCwNfzgtTG()]);
    _eIXbZrDQvyqHcufj = kZCzYHO(_euJKLyWnAbHmetD, [DULCiQqMJAk kzqvYPK:kCwNfzgtTG()]);
    _eIXbZrDQvyqHcufj.hidden = YES;
    [_eHFLdIVView addSubview:_euJKLyWnAbHmetD];
    
    _eGzxLfHI = [[UIButton alloc]initWithFrame:CGRectMake(CGRectGetMaxX(_euJKLyWnAbHmetD.frame), 0, 100, 20)];
    [_eGzxLfHI setTitle:@"用户注册服务协议" forState:UIControlStateNormal];
    _eGzxLfHI.titleLabel.font = [UIFont systemFontOfSize:12];
    _eGzxLfHI.contentHorizontalAlignment = UIControlContentHorizontalAlignmentLeft;
    [_eGzxLfHI setTitleColor:[DULCiQqMJAk kzqvYPK:kCwNfzgtTG()] forState:UIControlStateNormal];
    [_eGzxLfHI addTarget:self action:@selector(koskHQJnAiBFP:) forControlEvents:UIControlEventTouchUpInside];
    
    [_eHFLdIVView addSubview:_eGzxLfHI];
    
    [self addSubview:_eHFLdIVView];
    
    if ([kIrvOHcu() isEqualToString:@"1"]) {
        _eHFLdIVView.hidden = NO;
    } else {
        _eHFLdIVView.hidden = YES;
    }
    
}

- (void)kuFklaWPhVSoE:(UIButton *)sender {
    sender.selected = !sender.selected;
    if (sender.selected) {
        _eXgMcAIK.hidden = YES;
        _eIXbZrDQvyqHcufj.hidden = NO;
    } else {
        _eXgMcAIK.hidden = NO;
        _eIXbZrDQvyqHcufj.hidden = YES;
    }
}

- (void)koskHQJnAiBFP:(UIButton *)sender {
    
    NSString *url = kMTBQakZDx();
    NSString *protocolURL = kCKMHdimr(url);
    [DUKxuUIr koskHQJnAiBFPWithURL:protocolURL];
}


- (void)kFhumUEfn {
    
    _eMQuBOarE = kPofSGniBdetAa();
    
    [DUjHPamSNKWkfM khXiHKlJYIcsWTb:_eVZsbUve kjwoMfYHX:_eMQuBOarE];
    [DUjHPamSNKWkfM kcNCfuJpSgtid:_eVZsbUve kjwoMfYHX:kPofSGniBdetAa()];
    [DUjHPamSNKWkfM kdMvtuRCVqTon:_eVZsbUve kjwoMfYHX:kPofSGniBdetAa()];
    [DUjHPamSNKWkfM kgrLjqVbGpvdykZl:_eVZsbUve kjwoMfYHX:kDoRYcqQOnd()];
    
    [DUjHPamSNKWkfM khXiHKlJYIcsWTb:_eKTYJzc kjwoMfYHX:_eMQuBOarE];
    [DUjHPamSNKWkfM kcNCfuJpSgtid:_eKTYJzc kjwoMfYHX:khSRvCsVT()];
    [DUjHPamSNKWkfM kYzDgmEuJZa:_eKTYJzc kjwoMfYHX:kQwnLDEgevqK()];
    [DUjHPamSNKWkfM kgrLjqVbGpvdykZl:_eKTYJzc kjwoMfYHX:kQwnLDEgevqK()];
    
    _eMQuBOarE += kDoRYcqQOnd();
    _eMQuBOarE += ktaMSrs();
    
    [DUjHPamSNKWkfM khXiHKlJYIcsWTb:_ezuKvVmpOUIQjeD kjwoMfYHX:_eMQuBOarE];
    [DUjHPamSNKWkfM ktGjyplNWv:_ezuKvVmpOUIQjeD kjwoMfYHX:0];
    [DUjHPamSNKWkfM kYzDgmEuJZa:_ezuKvVmpOUIQjeD kjwoMfYHX:kExuNVS()];
    [DUjHPamSNKWkfM kgrLjqVbGpvdykZl:_ezuKvVmpOUIQjeD kjwoMfYHX:kDoRYcqQOnd()];
    
    _eMQuBOarE += kDoRYcqQOnd();
    _eMQuBOarE += ktaMSrs();
    
    [DUjHPamSNKWkfM khXiHKlJYIcsWTb:_eubaPDwrHysfdj kjwoMfYHX:_eMQuBOarE];
    [DUjHPamSNKWkfM ktGjyplNWv:_eubaPDwrHysfdj kjwoMfYHX:0];
    [DUjHPamSNKWkfM kYzDgmEuJZa:_eubaPDwrHysfdj kjwoMfYHX:kExuNVS()];
    [DUjHPamSNKWkfM kgrLjqVbGpvdykZl:_eubaPDwrHysfdj kjwoMfYHX:kDoRYcqQOnd()];
    
    _eMQuBOarE += kDoRYcqQOnd();
    _eMQuBOarE += ktaMSrs();
    
    
    [DUjHPamSNKWkfM khXiHKlJYIcsWTb:_eGZYOtlsNhargDe kjwoMfYHX:_eMQuBOarE];
    [DUjHPamSNKWkfM ktGjyplNWv:_eGZYOtlsNhargDe kjwoMfYHX:0];
    [DUjHPamSNKWkfM kYzDgmEuJZa:_eGZYOtlsNhargDe kjwoMfYHX:kExuNVS()];
    [DUjHPamSNKWkfM kgrLjqVbGpvdykZl:_eGZYOtlsNhargDe kjwoMfYHX:kDoRYcqQOnd()];
    
    
    [DUjHPamSNKWkfM khXiHKlJYIcsWTb:_eHFLdIVView kjwoMfYHX:(_eMQuBOarE + kDoRYcqQOnd() + kPofSGniBdetAa())];
    [DUjHPamSNKWkfM kcNCfuJpSgtid:_eHFLdIVView kjwoMfYHX:khSRvCsVT()];
    [DUjHPamSNKWkfM kYzDgmEuJZa:_eHFLdIVView kjwoMfYHX:120];
    [DUjHPamSNKWkfM kgrLjqVbGpvdykZl:_eHFLdIVView kjwoMfYHX:kzrKvQemERlgdP()];
    
    
    
    
    _eMQuBOarE += kDoRYcqQOnd();
    _eMQuBOarE += (ktaMSrs() * 3);
    
    [DUjHPamSNKWkfM khXiHKlJYIcsWTb:_eeAKvgjizHJw kjwoMfYHX:_eMQuBOarE];
    [DUjHPamSNKWkfM ktGjyplNWv:_eeAKvgjizHJw kjwoMfYHX:0];
    [DUjHPamSNKWkfM kYzDgmEuJZa:_eeAKvgjizHJw kjwoMfYHX:kcNsoFWewpBQT()];
    [DUjHPamSNKWkfM kgrLjqVbGpvdykZl:_eeAKvgjizHJw kjwoMfYHX:kiHIVjCQRJ()];
    
    _eMQuBOarE += kDoRYcqQOnd();
    [self kTLrBoKzIJa];
}

#pragma mark ---------- 计算输入框的位置
- (void)kTLrBoKzIJa {
    if (CGRectGetHeight(self.ezuKvVmpOUIQjeD.bounds)) {
        [self kJHuExWpsqVKfl:self.ezuKvVmpOUIQjeD];
    }
    if (CGRectGetHeight(self.eubaPDwrHysfdj.bounds)) {
        [self kJHuExWpsqVKfl:self.eubaPDwrHysfdj];
    }
    if (CGRectGetHeight(self.eGZYOtlsNhargDe.bounds)) {
        [self kJHuExWpsqVKfl:self.eGZYOtlsNhargDe];
    }
}
- (void)kJHuExWpsqVKfl:(DUHWleqOoxv *)elpZwvNR {
    UIWindow *window = kOjcdzAgI();
    CGRect rect = [elpZwvNR convertRect:elpZwvNR.bounds toView:window];
    CGFloat eIpxfwWAXvzMaxY = CGRectGetMaxY(rect);
    [elpZwvNR kJHuExWpsqVKfl:eIpxfwWAXvzMaxY];
}

#pragma mark ---------- back Action
-(void)kvABkErUSyhAction:(UIButton *)sender {
    if (_kvABkErUSyhAction) {
        [self kDlfUmNpWuRzrgq];
        self.hidden = YES;
        _kvABkErUSyhAction();
        [self removeFromSuperview];
    }
}

#pragma mark ---------- button Action
- (void)kYNuzsjLKwofUP:(UIButton *)sender {
    NSString *account = _ezuKvVmpOUIQjeD.eegFcbrRpD;
    NSString *code = _eubaPDwrHysfdj.eegFcbrRpD;
    NSString *password = _eGZYOtlsNhargDe.eegFcbrRpD;
    
    if (_eIXbZrDQvyqHcufj.hidden && !_eHFLdIVView.hidden) {
        [DUyUrAEagzMZ kdSzeClsBhOtZIYxErrorMessage:@"请先阅读相关协议并勾选同意"];
        return;
    }
    
    if (!account || !account.length) {
        [DUyUrAEagzMZ kdSzeClsBhOtZIYxErrorMessage:@"请输入手机号码"];
        return;
    }
    if (!password || !password.length) {
        [DUyUrAEagzMZ kdSzeClsBhOtZIYxErrorMessage:@"请输入密码"];
        return;
    }
    if (!code || !code.length) {
        [DUyUrAEagzMZ kdSzeClsBhOtZIYxErrorMessage:@"请输入验证码"];
        return;
    }
    if (!kzJomuDbFgVxtUfX(password) || !kzJomuDbFgVxtUfX(password)) {
        [DUyUrAEagzMZ kdSzeClsBhOtZIYxErrorMessage:@"密码格式有误"];
        return;
    }
    NSDictionary *para = @{
                           @"phone": account,
                           @"password": password,
                           @"code": code,
                           @"adv_id": kXsJmMxSNAyp(),
                           @"channel_id": kGxWjgvIUlbJhFoO(),
                           @"material_id": @"0",
                           @"gid": kEJsVuODloh(),
                           @"sub_gid": kOVNImM(),
                           @"platform_id": kKQumhviO(),
                           @"device_code": kGvYpKkCRTLiA()
                           };
    __weak typeof(self) weakSelf = self;
    [DUyUrAEagzMZ kdSzeClsBhOtZIYxIndicatorWithTitlte:@"正在注册..."];
    [self.ekSifuGysdvlm kXLPOEpCBozkZM:kPcTuIGOy() parameters:para];
    self.ekSifuGysdvlm.kurcxnG = ^(DUzUhgRKSDH *object) {
        dispatch_async(dispatch_get_main_queue(), ^{
            [DUyUrAEagzMZ kmBSjbQ];
            if (object.ebTBquLMZ == 200) {
                [weakSelf kNWDtGCgh:object];
            } else {
                if (object.euwmDFU) {
                    [DUyUrAEagzMZ kdSzeClsBhOtZIYxErrorMessage:object.euwmDFU];
                }
            }
        });
    };
    self.ekSifuGysdvlm.kkMohviBYIVtrnEm = ^(NSError *error) {
        dispatch_async(dispatch_get_main_queue(), ^{
            [DUyUrAEagzMZ kmBSjbQ];
            [DUyUrAEagzMZ kdSzeClsBhOtZIYxErrorMessage:@"网络出了小差!!!"];
        });
    };
}

- (void)kNWDtGCgh:(DUzUhgRKSDH *)memberRegisterModel {
    /// 保存账户
    kgLROBiPX(_ezuKvVmpOUIQjeD.eegFcbrRpD);
    /// 保存最后登陆的账户
    ktkehrHfaJV(_ezuKvVmpOUIQjeD.eegFcbrRpD);
    /// 保存账户密码
    krIVPZxslkvLmD(_eGZYOtlsNhargDe.eegFcbrRpD, _ezuKvVmpOUIQjeD.eegFcbrRpD);
    
    NSDictionary *userInfo = @{
                               @"uid": memberRegisterModel.eGzNRZFM,
                               @"username": memberRegisterModel.eHKOtDbFEsVUQThW
                               };
    kXQPAZNUwrm(eMapQoRwN, nil, userInfo);
    BOOL eqUnENAlvyJLoQp = NO;
    if ([memberRegisterModel.eWmXbyHJhiYDB isEqualToString:@"1"]) {
        /// 没有绑定身份证
        eqUnENAlvyJLoQp = YES;
    }
    if (_kNWDtGCgh) {
        self.hidden = YES;
        [self removeFromSuperview];
        _kNWDtGCgh(eqUnENAlvyJLoQp);
    }
}



-(DUzUhgRKSDH *)ekSifuGysdvlm {
    if (!_ekSifuGysdvlm) {
        _ekSifuGysdvlm = [[DUzUhgRKSDH alloc]init];
    }
    return _ekSifuGysdvlm;
}

@end
